(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,i){},26:function(e,t,i){e.exports=i(41)},41:function(e,t,i){"use strict";i.r(t);var a,n,s,r=i(0),o=i(16),l=i(12),c=i(4),h=i(5),p=i(8),m=i(7),u=i(9),d=(i(15),function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"Header"},r.createElement("div",{className:"MenuContainer"},r.createElement("div",{className:"Menu"},r.createElement("div",{className:"MenuItem"},r.createElement("div",{className:"MenuItemIcon lnr-home"}),r.createElement("div",null,"HOME")),r.createElement("div",{className:"MenuItem active"},r.createElement("div",{className:"MenuItemIcon lnr-home"}),r.createElement("div",null,"Crash")),r.createElement("div",{className:"MenuItem"},r.createElement("div",{className:"MenuItemIcon lnr-home"}),r.createElement("div",null,"Roulette")),r.createElement("div",{className:"MenuItem"},r.createElement("div",{className:"MenuItemIcon lnr-home"}),r.createElement("div",null,"\u0414\u0436\u0435\u043a\u043f\u043e\u0442")),r.createElement("div",{className:"MenuItem"},r.createElement("div",{className:"MenuItemIcon lnr-home"}),r.createElement("div",null,"TradeUp")),r.createElement("div",{className:"MenuItem"},r.createElement("div",{className:"MenuItemIcon lnr-home"}),r.createElement("div",null,"Hilo")))))}}]),t}(r.Component)),b=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"TopLineContainer"},r.createElement("div",{className:"TopLineTracker"},r.createElement("div",{className:"TopLineTrackerTxt"},!this.props.paused&&r.createElement("span",null," in progress | good luck "),this.props.paused&&this.props.finished&&r.createElement("span",null,"Crashed @ ",this.props.tick,"x"),this.props.paused&&!this.props.finished&&r.createElement("span",null," Starting Game "))),r.createElement("div",{className:"HistoryLine"},r.createElement("span",{className:"HistoryLabel"},"Latest games:"),r.createElement("div",{className:"HistoryList"},this.props.history.map(function(e){return r.createElement("div",{className:"HistoryLineItem green",key:e.current_millis},e.coef,"x")})),r.createElement("div",{className:"HistoryLineIcon lnr-history"})))}}]),t}(r.Component),g=Object(l.b)(a=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"PlayersContainer"},r.createElement("div",{className:"PlayerTableHead"},r.createElement("div",{className:"pl_count"},r.createElement("span",{className:"icon icon-players"},r.createElement("span",{className:"path1"}),r.createElement("span",{className:"path2"})),r.createElement("span",{className:"pl_onli"},this.props.players.length)),r.createElement("div",{className:"pl_count fr"},r.createElement("span",{className:"icon icon-gammdom-symbol"}),r.createElement("span",{className:"pl_onli"},r.createElement("span",null,"14\u202f282")))),r.createElement("div",{className:"table_titles"},r.createElement("div",{className:"pl_name"},"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.createElement("div",{className:"pl_name"},"@"),r.createElement("div",{className:"pl_name"},"\u0421\u0442\u0430\u0432\u043a\u0430"),r.createElement("div",{className:"pl_name"},"\u041f\u0440\u0438\u0431\u044b\u043b\u044c")),r.createElement("div",{className:"pl_table_data"},this.props.players.map(function(e){return r.createElement("div",{className:"pl_table_data"+(e.completed?" win":"")+(e.lost?" lose":""),key:e.id},r.createElement("div",{className:"pl_name"},r.createElement("a",{className:"pl_link",href:"/"},r.createElement("span",{className:"image_section"},r.createElement("img",{src:"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/5e/5ef357707e5ee1acf0bde23fc9a3497c07e44138.jpg",className:"user-logo",alt:"Dexter 21"})),r.createElement("span",{className:"bet_levels"},r.createElement("div",{className:"bet_level_40"},r.createElement("span",{className:"bet_level_val"},"27"))),r.createElement("span",{className:"pl_name_txt"},e.username))),r.createElement("div",{className:"pl_game"},e.coef||"-"),r.createElement("div",{className:"pl_bet"},e.activeGameBet),r.createElement("div",{className:"pl_profit"},e.profit?"+"+e.profit:"-"))})))}}]),t}(r.Component))||a,f=i(1),y=i(6),v=Object(l.b)(n=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(p.a)(this,Object(m.a)(t).call(this,e))).app=null,i.timestep=1,i.tickstep=.5,i.margin=50,i.txtTimings=[],i.txtY=[],i.linesY=[],i.graphPoints=[],i.pointsPerSec=10,i.pointsPer=30,i._pointsData=[],i._pointsDataInt=void 0,i._currentXLength=10,i._currentYLength=3,i._startXPoint=0,i._startYPoint=1.85,i.yLinesContainer=new y.b,i.graphArrow=new y.c,i.tstyle=new y.f({fontFamily:"Tahoma",fontSize:16,fontWeight:"normal",fill:"#aaaaaa"}),Object(f.m)(function(){return i.props.started},function(e){e&&(i.initScale(),i._pointsData=[])}),i}return Object(u.a)(t,e),Object(h.a)(t,[{key:"startPixiApp",value:function(){var e=this;this.app=new y.a({antialias:!0,view:document.getElementById("GameApp"),backgroundColor:2305073}),this.app.renderer.resize(1280,720);var t=this.app.screen.width,i=this.app.screen.height,a=new y.c;a.lineStyle(1,11184810,1),a.moveTo(this.margin,this.margin),a.lineTo(this.margin,i-this.margin),a.lineTo(t-this.margin,i-this.margin);var n=new y.c,s=this.yLinesContainer,r=new y.c,o=new y.c;o.lineStyle(1,11184810,1),o.moveTo(this.margin,0),o.lineTo(t-this.margin,0),o.position.y=i/2,s.addChild(o),this.linesY.push(o);var l=new y.e("1.85x",this.tstyle);l.x=15,l.y=i-this.margin-16,s.addChild(l),this.linesY.push(o),this.app.stage.addChild(a),this.app.stage.addChild(n),this.app.stage.addChild(s),this.app.stage.addChild(r),this.graphArrow.lineStyle(1,65280,1),this.graphArrow.beginFill(65280),this.graphArrow.moveTo(10,0),this.graphArrow.lineTo(20,35),this.graphArrow.lineTo(0,35),this.graphArrow.lineTo(10,0),this.graphArrow.endFill(),this.graphArrow.pivot.set(10,20),this.graphArrow.visible=!1,this.app.stage.addChild(this.graphArrow),this.drawGrid(n,s),this.app.ticker.add(function(){e.drawGrid(n,s),e.drawFunc(r)}),this._pointsDataInt=setInterval(this.addPointsData.bind(this),1e3/this.pointsPerSec)}}]),Object(h.a)(t,[{key:"addPointsData",value:function(){if(this.props.paused&&this.props.finished)this._pointsData=[];else if(this.props.started){this._pointsData.push({time:(Date.now()-this.props.started)/1e3,coef:this.props.tick});var e=(Date.now()-this.props.started)/1e3;this._currentXLength=e>10?e:10,this._currentXLength>10&&(this._currentXLength<30?this.timestep=2:this._currentXLength<60?this.timestep=5:this.timestep=10);Math.ceil((this.props.tick-this._startYPoint)*this.tickstep),this.tickstep;this._currentYLength=this.props.tick-this._startYPoint<1?3:this.props.tick-this._startYPoint,this._currentYLength>1&&(this._currentYLength<=3?this.tickstep=1:this._currentYLength<=6?this.tickstep=2:this.tickstep=4)}}},{key:"initScale",value:function(){var e=this;if(this.app){var t=this.app.screen.height;this._currentXLength=10,this._currentYLength=3,this.timestep=1,this.tickstep=.5,this.linesY.forEach(function(t,i){i>0&&e.yLinesContainer.removeChild(t)}),this.linesY.length=1,this.linesY[0].position.y=t/2,this.txtY.forEach(function(t,i){i>0&&e.yLinesContainer.removeChild(t)}),this.txtY.length=1,this.txtY[0].position.y=t/2,this.txtY[0].text="2.5x"}}},{key:"drawGrid",value:function(e,t){var i=this;if(this.app){var a=this.app.screen.width,n=this.app.screen.height,s=Math.floor(this._currentXLength/this.timestep),r=Math.floor(this._currentYLength/this.tickstep);e.clear(),e.lineStyle(1,11184810,1),this.txtTimings.length!==s&&(this.txtTimings.forEach(function(t,i){i>=s&&e.removeChild(t)}),this.txtTimings=this.txtTimings.slice(0,s));for(var o=0;o<s;o++){var l=this.margin+o*((a-2*this.margin)/(this._currentXLength/this.timestep));e.moveTo(l,n-this.margin),e.lineTo(l,n-this.margin-10),this.txtTimings[o]?(this.txtTimings[o].text=o*this.timestep+"s",this.txtTimings[o].x=l,this.txtTimings[o].y=n-this.margin+15):(this.txtTimings[o]=new y.e(o*this.timestep+"s",this.tstyle),this.txtTimings[o].x=l,this.txtTimings[o].y=n-this.margin+15,e.addChild(this.txtTimings[o]))}if(this.linesY.length<r){var c=new y.c;c.lineStyle(1,11184810,1,void 0,!0),c.moveTo(this.margin,0),c.lineTo(a-this.margin,0),c.position.y=n/2,t.addChild(c),this.linesY.push(c)}this.linesY.forEach(function(e,a){var s=n-a*(n-2*i.margin)/(i._currentYLength/i.tickstep)-i.margin;e.position.y=s,i.txtY[a]?(i.txtY[a].text=i._startYPoint+a*i.tickstep+"x",i.txtY[a].x=15,i.txtY[a].y=s-16):(i.txtY[a]=new y.e(i._startYPoint+a*i.tickstep+"x",i.tstyle),i.txtY[a].x=15,i.txtY[a].y=s-16,t.addChild(i.txtY[a]))})}}},{key:"drawFunc",value:function(e){if(this.app&&this.props.started&&!this.props.stopped&&this.props.tick){if(!this._pointsData.length)return e.clear(),void(this.graphPoints=[]);for(var t=this.app.screen.width,i=this.app.screen.height,a=0;a<this._pointsData.length;a++){this.graphPoints[a]||(this.graphPoints[a]=new y.d);var n=this.margin+Math.floor(this._pointsData[a].time*((t-2*this.margin)/this._currentXLength));this.graphPoints[a].x=n,this.graphPoints[a].y=i-(i-2*this.margin)/this._currentYLength*(this._pointsData[a].coef-this._startYPoint)-this.margin}e.clear(),e.lineStyle(10,65280,1),e.drawPolygon(this.graphPoints);var s=e.geometry.graphicsData;s[s.length-1].shape.closeStroke=!1;var r=this.graphPoints[this.graphPoints.length-1],o=this.graphPoints[0],l=-(r.x-o.x)/(r.y-o.y);this.graphArrow.position.x=r.x,this.graphArrow.position.y=r.y,this.graphArrow.rotation=Math.atan(l),this.graphArrow.visible||(this.graphArrow.visible=!0)}}},{key:"componentDidMount",value:function(){this.startPixiApp()}},{key:"render",value:function(){return r.createElement("div",{className:"GameStage"},r.createElement("div",{className:"GameGraphContainer"},r.createElement("div",{className:"max-profit"},r.createElement("i",{className:"clickable fa fa-line-chart"}),"Max profit: 10\u202f000\u202f000 coins"),r.createElement("canvas",{id:"GameApp",width:"800",height:"600"}),r.createElement("div",{className:"GameGraphText"},!this.props.paused&&r.createElement("span",{className:"GameGraphTick"}," ",this.props.tick.toFixed(2)," "),this.props.paused&&this.props.finished&&r.createElement("span",{className:"GameGraphCrashed"},"Crashed @ ",this.props.tick,"x"),this.props.paused&&!this.props.finished&&r.createElement("span",{className:"GameGraphNext"},"Next round in ",this.props.countdown,"s"))))}}]),t}(r.Component))||n,w=i(3),E=i(2),O=(i(24),i(14)),j=i(20);!function(e){e.PLAYER_JOINED="player_joined",e.PLAYER_LEAVED="player_leaved",e.GAME_TICK="game_tick",e.GAME_CRASH="game_crash"}(s||(s={}));var _,k,N,x,T,P,A,L,Y,C,G,D,I,M,S,z,F,R,H,X,B,J,K,V,W,U,q,Q=(_=function e(t){Object(c.a)(this,e),this.id=void 0,this.username=void 0,Object(w.a)(this,"activeGameBet",k,this),Object(w.a)(this,"completed",N,this),Object(w.a)(this,"profit",x,this),Object(w.a)(this,"coef",T,this),Object(w.a)(this,"lost",P,this),this.id=t.id,this.username=t.username,this.activeGameBet=t.bet},k=Object(E.a)(_.prototype,"activeGameBet",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(E.a)(_.prototype,"completed",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(E.a)(_.prototype,"profit",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=Object(E.a)(_.prototype,"coef",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=Object(E.a)(_.prototype,"lost",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_),Z=(A={},Object(O.a)(A,s.PLAYER_JOINED,function(e){ie.addGamePlayer(new Q(Object(j.a)({},e.user,{bet:e.bet_amount})))}),Object(O.a)(A,s.PLAYER_LEAVED,function(e){ie.gamePlayerMove(Object(j.a)({},e))}),Object(O.a)(A,s.GAME_TICK,function(e){ie.setTick(e.coef)}),Object(O.a)(A,s.GAME_CRASH,function(e){ie.gameFinish(e)}),A),$=function(){function e(){Object(c.a)(this,e),this.online=void 0,this.ws=void 0,this.online=!1,this.ws=new WebSocket("wss://crash.heja.games/ws"),this.ws.onopen=this.onopen,this.ws.onmessage=this.onmessage,this.ws.onerror=this.onerror,this.ws.onclose=this.onclose}return Object(h.a)(e,[{key:"onopen",value:function(e){console.log(" connection opened ")}},{key:"onmessage",value:function(e){var t="string"===typeof e.data?JSON.parse(e.data):null;t&&Z[t.type](t.payload)}},{key:"onerror",value:function(e){console.error("err: ",e)}},{key:"onclose",value:function(e){e.wasClean||console.warn("connection dropped!")}}]),e}(),ee=new(L=function(){function e(){var t=this;Object(c.a)(this,e),Object(w.a)(this,"gamehistory",Y,this),Object(w.a)(this,"gameplayers",C,this),Object(w.a)(this,"paused",G,this),Object(w.a)(this,"roundFinished",D,this),Object(w.a)(this,"nextRoundTick",I,this),Object(w.a)(this,"currentTick",M,this),Object(w.a)(this,"countDown",S,this),Object(w.a)(this,"startedAt",z,this),Object(w.a)(this,"stoppedAt",F,this),this._conn=void 0,this._cdint=void 0,Object(w.a)(this,"initConnection",R,this),Object(w.a)(this,"addGamePlayer",H,this),Object(w.a)(this,"gamePlayerMove",X,this),Object(w.a)(this,"deleteGamePlayer",B,this),Object(w.a)(this,"clearAllPlayers",J,this),Object(w.a)(this,"setTick",K,this),Object(w.a)(this,"gameStart",V,this),Object(w.a)(this,"gameStartPlayers",W,this),Object(w.a)(this,"planGameStart",U,this),Object(w.a)(this,"gameFinish",q,this),this.setLost=function(){t.gameplayers=t.gameplayers.map(function(e){return e.completed||(e.lost=!0),e})},this.gamehistory=[],this.gameplayers=[],this.paused=!0,this.nextRoundTick=0,this.currentTick=0,this.countDown=0,this._conn=new $}return Object(h.a)(e,[{key:"historyLastGames",get:function(){return this.gamehistory}}]),e}(),Y=Object(E.a)(L.prototype,"gamehistory",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(E.a)(L.prototype,"gameplayers",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(E.a)(L.prototype,"paused",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Object(E.a)(L.prototype,"roundFinished",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Object(E.a)(L.prototype,"nextRoundTick",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=Object(E.a)(L.prototype,"currentTick",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object(E.a)(L.prototype,"countDown",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(E.a)(L.prototype,"startedAt",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=Object(E.a)(L.prototype,"stoppedAt",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(E.a)(L.prototype,"historyLastGames",[f.e],Object.getOwnPropertyDescriptor(L.prototype,"historyLastGames"),L.prototype),R=Object(E.a)(L.prototype,"initConnection",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e._conn=new $}}}),H=Object(E.a)(L.prototype,"addGamePlayer",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.roundFinished&&e.gameStartPlayers(),e.gameplayers.push(t),console.timeEnd("roundstart")}}}),X=Object(E.a)(L.prototype,"gamePlayerMove",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.gameplayers=e.gameplayers.map(function(e){return e.id===t.user.id&&(e.completed=!0,e.profit=t.profit,e.coef=t.coef),e})}}}),B=Object(E.a)(L.prototype,"deleteGamePlayer",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.gameplayers=e.gameplayers.filter(function(e){return e.id!==t})}}}),J=Object(E.a)(L.prototype,"clearAllPlayers",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.gameplayers=[]}}}),K=Object(E.a)(L.prototype,"setTick",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentTick=t}}}),V=Object(E.a)(L.prototype,"gameStart",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.paused=!1,e.startedAt=Date.now(),e.nextRoundTick=0,clearInterval(e._cdint),e.countDown=0}}}),W=Object(E.a)(L.prototype,"gameStartPlayers",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.clearAllPlayers(),setTimeout(function(){e.roundFinished=!1},1e3),e.startedAt=0,e.stoppedAt=0}}}),U=Object(E.a)(L.prototype,"planGameStart",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){console.time("roundstart"),setTimeout(e.gameStart,e.nextRoundTick-Date.now()),e.countDown=Math.floor((e.nextRoundTick-Date.now())/100)/10,e._cdint=setInterval(function(){e.countDown=Math.floor((e.nextRoundTick-Date.now())/100)/10},100)}}}),q=Object(E.a)(L.prototype,"gameFinish",[f.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.paused=!0,e.roundFinished=!0,e.stoppedAt=Date.now(),e.gamehistory.unshift(t),e.nextRoundTick=t.next_round_millis,e.gamehistory.length>5&&(e.gamehistory=e.gamehistory.slice(0,5)),e.setLost(),e.planGameStart()}}}),L);window.state=ee;var te,ie=ee,ae=Object(l.b)(te=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"App"},r.createElement(d,null),r.createElement("div",{className:"gameContainer"},r.createElement(b,{history:ie.gamehistory,tick:ie.currentTick,paused:ie.paused,finished:ie.roundFinished}),r.createElement("div",null,r.createElement("div",{className:"middle_panel"},r.createElement(v,{tick:ie.currentTick,paused:ie.paused,finished:ie.roundFinished,countdown:ie.countDown,started:ie.startedAt,stopped:ie.stoppedAt})),r.createElement("div",{className:"right_panel"},r.createElement(g,{players:ie.gameplayers,paused:ie.paused})))))}}]),t}(r.Component))||te,ne=document.getElementById("root");Object(o.render)(r.createElement(l.a,ie,r.createElement(ae,null)),ne)}},[[26,2,1]]]);
//# sourceMappingURL=main.bf7fd206.chunk.js.map